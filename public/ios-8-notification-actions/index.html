<!DOCTYPE html>
<html lang="en-us">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">


<title>


     iOS 8 Notification Actions 

</title>
<link rel="canonical" href="https://davegaeddert.com/ios-8-notification-actions/">







  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/styles/default.min.css">




<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Ubuntu+Mono:400,400i,700,700i|Raleway:500">



    <link rel="stylesheet" href="/css/reset.css">
    <link rel="stylesheet" href="/css/pygments.css">
    <link rel="stylesheet" href="/css/main.css">
    




<link rel="shortcut icon"

    href="/img/favicon.ico"

>






</head>


<body lang="">

<section class="header">
    <div class="container">
        <div class="content">
            
              <a href="/"><img class="avatar" src="https://gravatar.com/avatar/a2c58001a61d06c06f1c8b8a76953844?s=50" /></a>
            
            <a href="/"><div class="name">Dave Gaeddert</div></a>
            
            <nav>
                <ul>
                    <li class="nav-blog"><a href="/blog/">Blog</a></li>
                    <li class="nav-about"><a href="/about/">About</a></li>
                    <li class="nav-code"><a href="/code/">Code</a></li>
                </ul>
            </nav>
        </div>
    </div>
</section>

<section class="icons">
    <div class="container">
        <div class="content">

        
            <a href="//github.com/davegaeddert" target="_blank" rel="noopener"><img class="icon" src="/img/github.svg" alt="github" /></a>
        

        
            <a href="//twitter.com/davegaeddert" target="_blank" rel="noopener"><img class="icon" src="/img/twitter.svg" alt="twitter" /></a>
        

        

        

        

        

        
            <a href="https://davegaeddert.com/index.xml"><img class="icon" src="/img/rss.svg" alt="rss" /></a>
        
        </div>
    </div>
</section>


<section class="main post non-narrow zero-top-spacing">
    <div class="container">
        <div class="content">
            <div class="front-matter">
                <div class="title-container">
                    <div class="page-heading">

    iOS 8 Notification Actions

</div>

                    <div class="initials"><a href="https://davegaeddert.com/"></a></div>
                </div>
                <div class="meta">
                    
                    <div class="date" title='Tue Sep 16 2014 00:00:00 &#43;0000'>Sep 16, 2014</div>
                    
                    
                    <div class="reading-time"><div class="middot"></div>3 minutes read</div>
                    
                </div>
            </div>
            <div class="markdown">
                

<p><a href="#tutorial">Skip to the code</a></p>

<p>I am finally getting around to adding some of the new iOS 8 features to <a href="https://itunes.apple.com/us/app/beluga-shared-tasks./id836830314?mt=8">Beluga</a>. For whatever reason, I haven&rsquo;t been able to find any documentation on the new ability to add actions to notifications:
<img src="/img/blog/Screen-Shot-2014-09-16-at-5-28-05-PM.png" alt="iOS 8 Notification" /></p>

<p>Maybe I didn&rsquo;t look hard enough, who knows. Anyway I decided to make quick demo of how to do this based on the <a href="https://developer.apple.com/videos/wwdc/2014/">WWDC 2014 session video &ldquo;What&rsquo;s New in iOS Notifications&rdquo;</a>.</p>

<hr />

<h1 id="span-id-tutorial-span-tutorial"><span id="tutorial"></span>Tutorial</h1>

<p>All of the following can be found in a ready-to-go Xcode project on <a href="https://github.com/davegaeddert/tut-ios8-notifications">GitHub</a>, I know I always just jump there&hellip;</p>

<h2 id="create-a-notification-action">Create a notification action</h2>

<pre><code class="language-objectivec">UIMutableUserNotificationAction *acceptAction = [[UIMutableUserNotificationAction alloc] init];
acceptAction.identifier = @&quot;ACCEPT_IDENTIFIER&quot;;
acceptAction.title = @&quot;Accept&quot;;

// Given seconds, not minutes, to run in the background
acceptAction.activationMode = UIUserNotificationActivationModeBackground;

// If YES the action is red
acceptAction.destructive = NO;

// If YES requires passcode, but does not unlock the device
acceptAction.authenticationRequired = NO;
</code></pre>

<h2 id="create-a-notification-action-category">Create a notification action category</h2>

<p>This allows you to group notifications, so for a &lsquo;Mail&rsquo; category your might have &lsquo;Reply&rsquo;, &lsquo;Delete&rsquo;, and &lsquo;Archive&rsquo;. Right now we&rsquo;re creating an &lsquo;Invite&rsquo; category, with our one action of &lsquo;Accept&rsquo;.</p>

<pre><code class="language-objectivec">UIMutableUserNotificationCategory *inviteCategory = [[UIMutableUserNotificationCategory alloc] init];
inviteCategory.identifier = @&quot;INVITE_CATEGORY&quot;;

// You can define up to 4 actions in the 'default' context
// On the lock screen, only the first two will be shown
// If you want to specify which two actions get used on the lockscreen, use UIUserNotificationActionContextMinimal
[inviteCategory setActions:@[acceptAction] forContext:UIUserNotificationActionContextDefault];

// These would get set on the lock screen specifically
// [inviteCategory setActions:@[declineAction, acceptAction] forContext:UIUserNotificationActionContextMinimal];
</code></pre>

<h2 id="now-register-for-those-notifications">Now register for those notifications</h2>

<pre><code class="language-objectivec">UIUserNotificationType types = (UIUserNotificationTypeAlert | UIUserNotificationTypeBadge | UIUserNotificationTypeSound);

NSSet *categories = [NSSet setWithObjects:inviteCategory, nil];
UIUserNotificationSettings *settings = [UIUserNotificationSettings settingsForTypes:types categories:categories];

[[UIApplication sharedApplication] registerUserNotificationSettings:settings];
</code></pre>

<p>When registering notification settings, this callback will be called:</p>

<pre><code class="language-objectivec">- (void)application:(UIApplication *)application didRegisterUserNotificationSettings:(UIUserNotificationSettings *)notificationSettings {

    // Get the notifications types that have been allowed, do whatever with them
    UIUserNotificationType allowedTypes = [notificationSettings types];

    NSLog(@&quot;Registered for notification types: %u&quot;, allowedTypes);

    // You can get this setting anywhere in your app by using this:
    // UIUserNotificationSettings *currentSettings = [[UIApplication sharedApplication] currentUserNotificationSettings];
}
</code></pre>

<h2 id="send-yourself-a-local-notification">Send yourself a local notification</h2>

<p><img src="/img/blog/Screen-Shot-2014-09-16-at-6-02-50-PM.png" alt="" />
<img src="/img/blog/Screen-Shot-2014-09-16-at-6-04-01-PM.png" alt="" /></p>

<pre><code class="language-objectivec">UILocalNotification *notification = [[UILocalNotification alloc] init];
notification.alertBody = @&quot;Hey!&quot;;
notification.category = @&quot;INVITE_CATEGORY&quot;;

// The notification will arrive in 5 seconds, leave the app or lock your device to see
// it since we aren't doing anything to handle notifications that arrive while the app is open
notification.fireDate = [NSDate dateWithTimeIntervalSinceNow:5];

[[UIApplication sharedApplication] scheduleLocalNotification:notification];
</code></pre>

<h2 id="handle-the-action">Handle the action</h2>

<p>Sweet! Now you should have received the notification (note: you need to be anywhere but the app to see the notification with its actions: home screen, lock screen, another app, etc.), if you choose the &lsquo;Accept&rsquo; action we created then this callback will be called so you can deal with it.</p>

<pre><code class="language-objectivec">- (void)application:(UIApplication *)application handleActionWithIdentifier:(NSString *)identifier forLocalNotification:(UILocalNotification *)notification completionHandler:(void (^)())completionHandler {

    if ([identifier isEqualToString:@&quot;ACCEPT_IDENTIFIER&quot;]) {
        // handle it
        NSLog(@&quot;Invite accepted! Handle that somehow...&quot;);
    }

    // Call this when you're finished
    completionHandler();
}
</code></pre>

<p><a href="https://github.com/davegaeddert/tut-ios8-notifications">View the full code on Github (look in AppDelegate.m)</a></p>

                <br>
                <p><a href="/blog/">Back to posts</a></p>
            </div>
            <br>
            <div class="disqus">
                
            </div>
        </div>
    </div>
</section>



<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-54223125-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>



  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
  

  <script type="text/javascript">
    hljs.initHighlightingOnLoad();
  </script>



</body>
</html>

